const Easypost = require('@easypost/api');
const dotenv = require('dotenv');

// Setup API key
dotenv.config({ path: '/Users/jhammond/git/easypost/easypost-tools/.env' });
const prod = 'https://api.easypost.com/v2/'
const devvm = 'http://oregon1.jhammond.devvm.easypo.net:5000/v2/'
const api = new Easypost(process.env.DEVVM_TEST_API_KEY, {
    baseUrl: devvm,
});

// Assign JSON data to variable
const data = (

    // ENTER JSON DATA BELOW
    //===============================================================//

    {
        "created_at": "2021-03-05T22:21:34Z",
        "is_return": false,
        "messages": [
            {
                "carrier": "UPSSurePost",
                "carrier_account_id": "ca_d9f5fbcec0de4ba7a34482c28507a642",
                "type": "rate_error",
                "message": "The requested service is unavailable between the selected locations."
            },
            {
                "carrier": "UPSSurePost",
                "carrier_account_id": "ca_40194c4965f84474a792b44b1a2d375d",
                "type": "rate_error",
                "message": "The requested service is unavailable between the selected locations."
            }
        ],
        "mode": "test",
        "options": {
            "currency": "USD",
            "payment": {
                "type": "SENDER"
            },
            "date_advance": 0
        },
        "reference": null,
        "status": "delivered",
        "tracking_code": "LM985607456US",
        "updated_at": "2021-03-05T22:26:26Z",
        "batch_id": null,
        "batch_status": null,
        "batch_message": null,
        "customs_info": {
            "id": "cstinfo_9db17a557ed8468d866774a592a8c86a",
            "object": "CustomsInfo",
            "created_at": "2021-03-05T17:25:29Z",
            "updated_at": "2021-03-05T17:25:29Z",
            "contents_explanation": null,
            "contents_type": "merchandise",
            "customs_certify": false,
            "customs_signer": null,
            "eel_pfc": null,
            "non_delivery_option": "return",
            "restriction_comments": null,
            "restriction_type": "none",
            "mode": "test",
            "declaration": null,
            "customs_items": [
                {
                    "id": "cstitem_eb30f65361aa48e9b67c08e8c4757f13",
                    "object": "CustomsItem",
                    "created_at": "2021-03-05T17:25:29Z",
                    "updated_at": "2021-03-05T17:25:29Z",
                    "description": "Sweet shirts",
                    "hs_tariff_number": null,
                    "origin_country": "US",
                    "quantity": 1,
                    "value": "20.0",
                    "weight": 16,
                    "code": null,
                    "mode": "test",
                    "manufacturer": null,
                    "currency": null,
                    "eccn": null
                }
            ]
        },
        "from_address": {
            "id": "adr_f47319394d4049af80c511bc7cbc8193",
            "object": "Address",
            "created_at": "2021-03-05T17:05:10+00:00",
            "updated_at": "2021-03-05T17:05:10+00:00",
            "name": "Lulus",
            "company": "Lulus",
            "street1": "195 Humboldt St",
            "street2": null,
            "city": "Chicho",
            "state": "CA",
            "zip": "95928",
            "country": "US",
            "phone": "8669185858",
            "email": null,
            "mode": "test",
            "carrier_facility": null,
            "residential": null,
            "federal_tax_id": null,
            "state_tax_id": null,
            "verifications": {}
        },
        "insurance": null,
        "order_id": null,
        "parcel": {
            "id": "prcl_60ca87bcab9b40ebaae5bc5483188e5b",
            "object": "Parcel",
            "created_at": "2021-03-05T22:17:18Z",
            "updated_at": "2021-03-05T22:17:18Z",
            "length": null,
            "width": null,
            "height": null,
            "predefined_package": null,
            "weight": 16,
            "mode": "test"
        },
        "postage_label": {
            "object": "PostageLabel",
            "id": "pl_e6c44735091f4fcb98047f07908daf90",
            "created_at": "2021-03-05T22:22:25Z",
            "updated_at": "2021-03-05T22:22:25Z",
            "date_advance": 0,
            "integrated_form": "none",
            "label_date": "2021-03-05T22:22:25Z",
            "label_resolution": 300,
            "label_size": "6x4",
            "label_type": "default",
            "label_file_type": "image/png",
            "label_url": "https://easypost-files.s3-us-west-2.amazonaws.com/files/postage_label/20210305/b5e62a72bd3640d1b8f8726ab296f290.png",
            "label_pdf_url": null,
            "label_zpl_url": null,
            "label_epl2_url": null,
            "label_file": null
        },
        "refund_status": null,
        "scan_form": null,
        "selected_rate": {
            "id": "rate_9b14cb1c3c904f50b514106691299430",
            "object": "Rate",
            "created_at": "2021-03-05T22:22:25Z",
            "updated_at": "2021-03-05T22:22:25Z",
            "mode": "test",
            "service": "FirstClassPackageInternationalService",
            "carrier": "USPS",
            "rate": "20.19",
            "currency": "USD",
            "retail_rate": "21.25",
            "retail_currency": "USD",
            "list_rate": "20.19",
            "list_currency": "USD",
            "delivery_days": null,
            "delivery_date": null,
            "delivery_date_guaranteed": false,
            "est_delivery_days": null,
            "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
            "carrier_account_id": "ca_aa5e0aae797240068e221218875ac334"
        },
        "tracker": {
            "id": "trk_7f828aa0260e4deea45c257f7243ff20",
            "object": "Tracker",
            "mode": "test",
            "tracking_code": "LM985607456US",
            "status": "delivered",
            "status_detail": "arrived_at_destination",
            "created_at": "2021-03-05T22:22:25Z",
            "updated_at": "2021-03-05T22:25:26Z",
            "signed_by": "John Tester",
            "weight": null,
            "est_delivery_date": "2021-03-05T22:25:26Z",
            "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
            "carrier": "USPS",
            "tracking_details": [
                {
                    "object": "TrackingDetail",
                    "message": "Pre-Shipment Info Sent to USPS",
                    "description": null,
                    "status": "pre_transit",
                    "status_detail": "status_update",
                    "datetime": "2021-02-05T22:25:26Z",
                    "source": "USPS",
                    "carrier_code": null,
                    "tracking_location": {
                        "object": "TrackingLocation",
                        "city": null,
                        "state": null,
                        "country": null,
                        "zip": null
                    }
                },
                {
                    "object": "TrackingDetail",
                    "message": "Shipping Label Created",
                    "description": null,
                    "status": "pre_transit",
                    "status_detail": "status_update",
                    "datetime": "2021-02-06T11:02:26Z",
                    "source": "USPS",
                    "carrier_code": null,
                    "tracking_location": {
                        "object": "TrackingLocation",
                        "city": "HOUSTON",
                        "state": "TX",
                        "country": null,
                        "zip": "77063"
                    }
                },
                {
                    "object": "TrackingDetail",
                    "message": "Arrived at USPS Origin Facility",
                    "description": null,
                    "status": "in_transit",
                    "status_detail": "arrived_at_facility",
                    "datetime": "2021-02-06T21:07:26Z",
                    "source": "USPS",
                    "carrier_code": null,
                    "tracking_location": {
                        "object": "TrackingLocation",
                        "city": "NORTH HOUSTON",
                        "state": "TX",
                        "country": null,
                        "zip": "77315"
                    }
                },
                {
                    "object": "TrackingDetail",
                    "message": "Arrived at USPS Facility",
                    "description": null,
                    "status": "in_transit",
                    "status_detail": "arrived_at_facility",
                    "datetime": "2021-02-07T22:43:26Z",
                    "source": "USPS",
                    "carrier_code": null,
                    "tracking_location": {
                        "object": "TrackingLocation",
                        "city": "COLUMBIA",
                        "state": "SC",
                        "country": null,
                        "zip": "29201"
                    }
                },
                {
                    "object": "TrackingDetail",
                    "message": "Arrived at Post Office",
                    "description": null,
                    "status": "in_transit",
                    "status_detail": "arrived_at_facility",
                    "datetime": "2021-02-08T01:34:26Z",
                    "source": "USPS",
                    "carrier_code": null,
                    "tracking_location": {
                        "object": "TrackingLocation",
                        "city": "CHARLESTON",
                        "state": "SC",
                        "country": null,
                        "zip": "29407"
                    }
                },
                {
                    "object": "TrackingDetail",
                    "message": "Sorting Complete",
                    "description": null,
                    "status": "in_transit",
                    "status_detail": "status_update",
                    "datetime": "2021-02-08T07:14:26Z",
                    "source": "USPS",
                    "carrier_code": null,
                    "tracking_location": {
                        "object": "TrackingLocation",
                        "city": "CHARLESTON",
                        "state": "SC",
                        "country": null,
                        "zip": "29407"
                    }
                },
                {
                    "object": "TrackingDetail",
                    "message": "Out for Delivery",
                    "description": null,
                    "status": "out_for_delivery",
                    "status_detail": "out_for_delivery",
                    "datetime": "2021-02-08T07:24:26Z",
                    "source": "USPS",
                    "carrier_code": null,
                    "tracking_location": {
                        "object": "TrackingLocation",
                        "city": "CHARLESTON",
                        "state": "SC",
                        "country": null,
                        "zip": "29407"
                    }
                },
                {
                    "object": "TrackingDetail",
                    "message": "Delivered",
                    "description": null,
                    "status": "delivered",
                    "status_detail": "arrived_at_destination",
                    "datetime": "2021-02-08T12:16:26Z",
                    "source": "USPS",
                    "carrier_code": null,
                    "tracking_location": {
                        "object": "TrackingLocation",
                        "city": "CHARLESTON",
                        "state": "SC",
                        "country": null,
                        "zip": "29407"
                    }
                }
            ],
            "fees": [],
            "carrier_detail": {
                "object": "CarrierDetail",
                "service": "First-Class Package Service",
                "container_type": null,
                "est_delivery_date_local": null,
                "est_delivery_time_local": null,
                "origin_location": "HOUSTON TX, 77001",
                "origin_tracking_location": {
                    "object": "TrackingLocation",
                    "city": "NORTH HOUSTON",
                    "state": "TX",
                    "country": null,
                    "zip": "77315"
                },
                "destination_location": "CHARLESTON SC, 29401",
                "destination_tracking_location": {
                    "object": "TrackingLocation",
                    "city": "CHARLESTON",
                    "state": "SC",
                    "country": null,
                    "zip": "29407"
                },
                "guaranteed_delivery_date": null,
                "alternate_identifier": null,
                "initial_delivery_attempt": "2021-02-08T12:16:26Z"
            },
            "public_url": "https://track.easypost.com/djE6dHJrXzdmODI4YWEwMjYwZTRkZWVhNDVjMjU3ZjcyNDNmZjIw"
        },
        "to_address": {
            "id": "adr_c955e967da85472d870fc7b424be3ca8",
            "object": "Address",
            "created_at": "2021-03-05T17:09:18+00:00",
            "updated_at": "2021-03-05T17:09:18+00:00",
            "name": "International Test",
            "company": null,
            "street1": "53 Westwood",
            "street2": null,
            "city": "Toronto",
            "state": "ON",
            "zip": "M4K 2A7",
            "country": "CA",
            "phone": "8669185858",
            "email": null,
            "mode": "test",
            "carrier_facility": null,
            "residential": null,
            "federal_tax_id": null,
            "state_tax_id": null,
            "verifications": {}
        },
        "usps_zone": null,
        "return_address": {
            "id": "adr_f47319394d4049af80c511bc7cbc8193",
            "object": "Address",
            "created_at": "2021-03-05T17:05:10+00:00",
            "updated_at": "2021-03-05T17:05:10+00:00",
            "name": "Lulus",
            "company": "Lulus",
            "street1": "195 Humboldt St",
            "street2": null,
            "city": "Chicho",
            "state": "CA",
            "zip": "95928",
            "country": "US",
            "phone": "8669185858",
            "email": null,
            "mode": "test",
            "carrier_facility": null,
            "residential": null,
            "federal_tax_id": null,
            "state_tax_id": null,
            "verifications": {}
        },
        "buyer_address": {
            "id": "adr_c955e967da85472d870fc7b424be3ca8",
            "object": "Address",
            "created_at": "2021-03-05T17:09:18+00:00",
            "updated_at": "2021-03-05T17:09:18+00:00",
            "name": "International Test",
            "company": null,
            "street1": "53 Westwood",
            "street2": null,
            "city": "Toronto",
            "state": "ON",
            "zip": "M4K 2A7",
            "country": "CA",
            "phone": "8669185858",
            "email": null,
            "mode": "test",
            "carrier_facility": null,
            "residential": null,
            "federal_tax_id": null,
            "state_tax_id": null,
            "verifications": {}
        },
        "object": "Shipment",
        "rates": [
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:37Z",
                "updated_at": "2021-03-05T22:21:37Z",
                "mode": "test",
                "service": "FirstClassPackageInternationalService",
                "carrier": "USPS",
                "rate": "20.19",
                "currency": "USD",
                "retail_rate": "21.25",
                "retail_currency": "USD",
                "list_rate": "20.19",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_aa5e0aae797240068e221218875ac334",
                "id": "rate_9b14cb1c3c904f50b514106691299430"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:37Z",
                "updated_at": "2021-03-05T22:21:37Z",
                "mode": "test",
                "service": "PriorityMailInternational",
                "carrier": "USPS",
                "rate": "35.72",
                "currency": "USD",
                "retail_rate": "37.60",
                "retail_currency": "USD",
                "list_rate": "35.72",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_aa5e0aae797240068e221218875ac334",
                "id": "rate_48107056181d4e5aa5ce786023da24c3"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:37Z",
                "updated_at": "2021-03-05T22:21:37Z",
                "mode": "test",
                "service": "ExpressMailInternational",
                "carrier": "USPS",
                "rate": "46.82",
                "currency": "USD",
                "retail_rate": "50.30",
                "retail_currency": "USD",
                "list_rate": "46.82",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_aa5e0aae797240068e221218875ac334",
                "id": "rate_e421d4501c244a849c1cab2bbec71097"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:37Z",
                "updated_at": "2021-03-05T22:21:37Z",
                "mode": "test",
                "service": "ExpressPlus",
                "carrier": "UPS",
                "rate": "146.27",
                "currency": "USD",
                "retail_rate": "139.65",
                "retail_currency": "USD",
                "list_rate": "143.24",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_3fbc9dfa11b644b2be997e84793a2d39",
                "id": "rate_ae2ea2fb53c341e3bb0922a23ae0f19b"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:37Z",
                "updated_at": "2021-03-05T22:21:37Z",
                "mode": "test",
                "service": "UPSStandard",
                "carrier": "UPS",
                "rate": "29.67",
                "currency": "USD",
                "retail_rate": "28.49",
                "retail_currency": "USD",
                "list_rate": "28.50",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_3fbc9dfa11b644b2be997e84793a2d39",
                "id": "rate_836d1734c7cf42ad97dee6fb7ee5f568"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:37Z",
                "updated_at": "2021-03-05T22:21:37Z",
                "mode": "test",
                "service": "UPSSaver",
                "carrier": "UPS",
                "rate": "102.91",
                "currency": "USD",
                "retail_rate": "96.16",
                "retail_currency": "USD",
                "list_rate": "99.03",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_3fbc9dfa11b644b2be997e84793a2d39",
                "id": "rate_bf717e21b5ab4defbb37257b93a7f6de"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:37Z",
                "updated_at": "2021-03-05T22:21:37Z",
                "mode": "test",
                "service": "Express",
                "carrier": "UPS",
                "rate": "103.90",
                "currency": "USD",
                "retail_rate": "96.85",
                "retail_currency": "USD",
                "list_rate": "100.44",
                "list_currency": "USD",
                "delivery_days": 1,
                "delivery_date": null,
                "delivery_date_guaranteed": true,
                "est_delivery_days": 1,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_3fbc9dfa11b644b2be997e84793a2d39",
                "id": "rate_7e9ffab4b1404a809090c565347c554e"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "Expedited",
                "carrier": "UPS",
                "rate": "97.48",
                "currency": "USD",
                "retail_rate": "87.93",
                "retail_currency": "USD",
                "list_rate": "93.37",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_3fbc9dfa11b644b2be997e84793a2d39",
                "id": "rate_ed2f0a1ec2974d14abb3c32312b7192c"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "ExpressPlus",
                "carrier": "UPS",
                "rate": "147.75",
                "currency": "USD",
                "retail_rate": "139.65",
                "retail_currency": "USD",
                "list_rate": "143.24",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_ffda0b6054174ab8a8bc7722517e0c78",
                "id": "rate_c631abb1c2ed4df2853344354e24cada"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "UPSStandard",
                "carrier": "UPS",
                "rate": "29.97",
                "currency": "USD",
                "retail_rate": "28.49",
                "retail_currency": "USD",
                "list_rate": "28.50",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_ffda0b6054174ab8a8bc7722517e0c78",
                "id": "rate_dadc6c2c73634c339d304221ce7d41fd"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "UPSSaver",
                "carrier": "UPS",
                "rate": "103.95",
                "currency": "USD",
                "retail_rate": "96.16",
                "retail_currency": "USD",
                "list_rate": "99.03",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_ffda0b6054174ab8a8bc7722517e0c78",
                "id": "rate_00834cd4ad514a9caf11ab973c627d2c"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "Express",
                "carrier": "UPS",
                "rate": "104.95",
                "currency": "USD",
                "retail_rate": "96.85",
                "retail_currency": "USD",
                "list_rate": "100.44",
                "list_currency": "USD",
                "delivery_days": 1,
                "delivery_date": null,
                "delivery_date_guaranteed": true,
                "est_delivery_days": 1,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_ffda0b6054174ab8a8bc7722517e0c78",
                "id": "rate_722b180a21fb41c39629d0acefeb84b9"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "Expedited",
                "carrier": "UPS",
                "rate": "98.46",
                "currency": "USD",
                "retail_rate": "87.93",
                "retail_currency": "USD",
                "list_rate": "93.37",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_ffda0b6054174ab8a8bc7722517e0c78",
                "id": "rate_3ed05c29dca9479d902766c6009dfbab"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "ExpressPlus",
                "carrier": "UPS",
                "rate": "147.75",
                "currency": "USD",
                "retail_rate": "139.65",
                "retail_currency": "USD",
                "list_rate": "143.24",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_1e9a68e2f7ae41c086f61011e7f109f4",
                "id": "rate_6dbbd98dc0214a2e95d4b19309b8275a"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "UPSStandard",
                "carrier": "UPS",
                "rate": "29.97",
                "currency": "USD",
                "retail_rate": "28.49",
                "retail_currency": "USD",
                "list_rate": "28.50",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_1e9a68e2f7ae41c086f61011e7f109f4",
                "id": "rate_d6ea57114cc14e65b4a25ed2fc0cf257"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "UPSSaver",
                "carrier": "UPS",
                "rate": "103.95",
                "currency": "USD",
                "retail_rate": "96.16",
                "retail_currency": "USD",
                "list_rate": "99.03",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_1e9a68e2f7ae41c086f61011e7f109f4",
                "id": "rate_fee7a28169a347e1b4a749203f5620fe"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "Express",
                "carrier": "UPS",
                "rate": "104.95",
                "currency": "USD",
                "retail_rate": "96.85",
                "retail_currency": "USD",
                "list_rate": "100.44",
                "list_currency": "USD",
                "delivery_days": 1,
                "delivery_date": null,
                "delivery_date_guaranteed": true,
                "est_delivery_days": 1,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_1e9a68e2f7ae41c086f61011e7f109f4",
                "id": "rate_22434faaf39a4feeb79a1ec5f47f6675"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "Expedited",
                "carrier": "UPS",
                "rate": "98.46",
                "currency": "USD",
                "retail_rate": "87.93",
                "retail_currency": "USD",
                "list_rate": "93.37",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_1e9a68e2f7ae41c086f61011e7f109f4",
                "id": "rate_d7084a180b29475981a6743a7fa9f73e"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "ExpressPlus",
                "carrier": "UPS",
                "rate": "146.27",
                "currency": "USD",
                "retail_rate": "139.65",
                "retail_currency": "USD",
                "list_rate": "143.24",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_76799d8b5baf4717a7201da04bf4a997",
                "id": "rate_b183a9cf91544e1b9d48b7a1fb490c7d"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "UPSStandard",
                "carrier": "UPS",
                "rate": "29.67",
                "currency": "USD",
                "retail_rate": "28.49",
                "retail_currency": "USD",
                "list_rate": "28.50",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_76799d8b5baf4717a7201da04bf4a997",
                "id": "rate_ff13f16084c64bd7be08665b8b6efba3"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "UPSSaver",
                "carrier": "UPS",
                "rate": "102.91",
                "currency": "USD",
                "retail_rate": "96.16",
                "retail_currency": "USD",
                "list_rate": "99.03",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_76799d8b5baf4717a7201da04bf4a997",
                "id": "rate_a1ed85f3e17142f2a8e01df621d277a1"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "Express",
                "carrier": "UPS",
                "rate": "103.90",
                "currency": "USD",
                "retail_rate": "96.85",
                "retail_currency": "USD",
                "list_rate": "100.44",
                "list_currency": "USD",
                "delivery_days": 1,
                "delivery_date": null,
                "delivery_date_guaranteed": true,
                "est_delivery_days": 1,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_76799d8b5baf4717a7201da04bf4a997",
                "id": "rate_f2191bcbf3c0483092ac47deb0a82271"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "Expedited",
                "carrier": "UPS",
                "rate": "97.48",
                "currency": "USD",
                "retail_rate": "87.93",
                "retail_currency": "USD",
                "list_rate": "93.37",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_76799d8b5baf4717a7201da04bf4a997",
                "id": "rate_d79031f47d1e424794dc4000a95c579f"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "ExpressPlus",
                "carrier": "UPS",
                "rate": "147.75",
                "currency": "USD",
                "retail_rate": "139.65",
                "retail_currency": "USD",
                "list_rate": "143.24",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_584b3feb2fb5448db04ceb0e6868ecd5",
                "id": "rate_4a3ce9a868984c9c8f6e0f38436838a1"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "UPSStandard",
                "carrier": "UPS",
                "rate": "29.97",
                "currency": "USD",
                "retail_rate": "28.49",
                "retail_currency": "USD",
                "list_rate": "28.50",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_584b3feb2fb5448db04ceb0e6868ecd5",
                "id": "rate_938f82e3456440c9820a11b47625b5ad"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "UPSSaver",
                "carrier": "UPS",
                "rate": "103.95",
                "currency": "USD",
                "retail_rate": "96.16",
                "retail_currency": "USD",
                "list_rate": "99.03",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_584b3feb2fb5448db04ceb0e6868ecd5",
                "id": "rate_a351e22165e64d6baae27bdb417b7f50"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "Express",
                "carrier": "UPS",
                "rate": "104.95",
                "currency": "USD",
                "retail_rate": "96.85",
                "retail_currency": "USD",
                "list_rate": "100.44",
                "list_currency": "USD",
                "delivery_days": 1,
                "delivery_date": null,
                "delivery_date_guaranteed": true,
                "est_delivery_days": 1,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_584b3feb2fb5448db04ceb0e6868ecd5",
                "id": "rate_bb7939dc87964c329e83d4d8d0e28d63"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "Expedited",
                "carrier": "UPS",
                "rate": "98.46",
                "currency": "USD",
                "retail_rate": "87.93",
                "retail_currency": "USD",
                "list_rate": "93.37",
                "list_currency": "USD",
                "delivery_days": null,
                "delivery_date": null,
                "delivery_date_guaranteed": false,
                "est_delivery_days": null,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_584b3feb2fb5448db04ceb0e6868ecd5",
                "id": "rate_2ef747295a98469cbc7b390664143c1c"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "ExpressWorldwideNonDoc",
                "carrier": "DHLExpress",
                "rate": "14.80",
                "currency": "USD",
                "retail_rate": null,
                "retail_currency": null,
                "list_rate": null,
                "list_currency": null,
                "delivery_days": 3,
                "delivery_date": "2021-03-08T00:00:00Z",
                "delivery_date_guaranteed": null,
                "est_delivery_days": 3,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_02839e1d3d604f5aa5a0f7e952ad1d8f",
                "id": "rate_3c666736821a4090ac6e5886b61934fd"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "ExpressEasyNonDoc",
                "carrier": "DHLExpress",
                "rate": "36.78",
                "currency": "USD",
                "retail_rate": null,
                "retail_currency": null,
                "list_rate": null,
                "list_currency": null,
                "delivery_days": 3,
                "delivery_date": "2021-03-08T00:00:00Z",
                "delivery_date_guaranteed": null,
                "est_delivery_days": 3,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_02839e1d3d604f5aa5a0f7e952ad1d8f",
                "id": "rate_ae47ff59be904b67a3450681c56e6c99"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "MedicalExpressNonDoc",
                "carrier": "DHLExpress",
                "rate": "106.00",
                "currency": "USD",
                "retail_rate": null,
                "retail_currency": null,
                "list_rate": null,
                "list_currency": null,
                "delivery_days": 3,
                "delivery_date": "2021-03-08T00:00:00Z",
                "delivery_date_guaranteed": null,
                "est_delivery_days": 3,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_02839e1d3d604f5aa5a0f7e952ad1d8f",
                "id": "rate_cae6b8141ed34f08a339360e436a24e1"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "ExpressWorldwideNonDoc",
                "carrier": "DHLExpress",
                "rate": "14.80",
                "currency": "USD",
                "retail_rate": null,
                "retail_currency": null,
                "list_rate": null,
                "list_currency": null,
                "delivery_days": 3,
                "delivery_date": "2021-03-08T00:00:00Z",
                "delivery_date_guaranteed": null,
                "est_delivery_days": 3,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_947c6cf77eaa4e7da22aecd9d1fe8622",
                "id": "rate_fdaebbb7531a480d9bb994174ef578fa"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "ExpressEasyNonDoc",
                "carrier": "DHLExpress",
                "rate": "36.78",
                "currency": "USD",
                "retail_rate": null,
                "retail_currency": null,
                "list_rate": null,
                "list_currency": null,
                "delivery_days": 3,
                "delivery_date": "2021-03-08T00:00:00Z",
                "delivery_date_guaranteed": null,
                "est_delivery_days": 3,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_947c6cf77eaa4e7da22aecd9d1fe8622",
                "id": "rate_0f9e55e834ae474cb1b408a7abbcf596"
            },
            {
                "object": "Rate",
                "created_at": "2021-03-05T22:21:38Z",
                "updated_at": "2021-03-05T22:21:38Z",
                "mode": "test",
                "service": "MedicalExpressNonDoc",
                "carrier": "DHLExpress",
                "rate": "106.00",
                "currency": "USD",
                "retail_rate": null,
                "retail_currency": null,
                "list_rate": null,
                "list_currency": null,
                "delivery_days": 3,
                "delivery_date": "2021-03-08T00:00:00Z",
                "delivery_date_guaranteed": null,
                "est_delivery_days": 3,
                "shipment_id": "shp_28cf163651aa4c81acbaab1ff1c3c20c",
                "carrier_account_id": "ca_947c6cf77eaa4e7da22aecd9d1fe8622",
                "id": "rate_9c8e496780de4087b1fe488c3625481a"
            }
        ],
        "forms": [
            {
                "object": "Form",
                "created_at": "2021-03-05T22:22:25Z",
                "updated_at": "2021-03-05T22:22:25Z",
                "mode": "test",
                "form_type": "commercial_invoice",
                "form_url": "https://easypost-files.s3-us-west-2.amazonaws.com/files/form/20210305/cd70b172757741efa61432c6aa6187c9.pdf",
                "submitted_electronically": true,
                "id": "form_a920ca61b4fe4d318a748f53385e851b"
            }
        ],
        "fees": [
            {
                "object": "Fee",
                "type": "LabelFee",
                "amount": "0.00000",
                "charged": true,
                "refunded": false
            },
            {
                "object": "Fee",
                "type": "PostageFee",
                "amount": "20.19000",
                "charged": true,
                "refunded": false
            }
        ],
        "id": "shp_28cf163651aa4c81acbaab1ff1c3c20c"
    }

    //===============================================================//
);

// Get rid of all the things
delete data.to_address.id
delete data.to_address.mode
delete data.to_address.updated_at
delete data.to_address.created_at
delete data.to_address.carrier_facility
delete data.from_address.id
delete data.from_address.created_at
delete data.from_address.mode
delete data.from_address.updated_at
delete data.parcel.id
delete data.parcel.created_at
delete data.parcel.mode
delete data.parcel.updated_at
if (data.parcel.predefined_package === null) {
    delete data.parcel.predefined_package
}
if (data.customs_info) {
    delete data.customs_info.id
    delete data.customs_info.created_at
    delete data.customs_info.mode
    delete data.customs_info.updated_at
    for (let i = 0; i < data.customs_info.customs_items.length; i++) {
        delete data.customs_info.customs_items[i].id
        delete data.customs_info.customs_items[i].created_at
        delete data.customs_info.customs_items[i].mode
        delete data.customs_info.customs_items[i].updated_at
        if (data.customs_info.customs_items[i].currency === null) {
            delete data.customs_info.customs_items[i].currency
        }
    }
}
delete data.batch_id
delete data.batch_message
delete data.batch_status

// Recreate the shipment
const shipment = new api.Shipment({
    to_address: data.to_address,
    from_address: data.from_address,
    parcel: data.parcel,
    options: data.options,
    customs_info: data.customs_info,
    // service: "Xpresspost",
    // carrier: "CanadaPost",
    // label_format: "PDF",
    carrier_accounts: [process.env.T30142], // If CANADA_POST, use TEST!
    // reference: 'test-reference'
    // is_return: true
});

// Print the results to console
console.log("//===============================================================//");
shipment.save().then(console.log).catch(console.log);
